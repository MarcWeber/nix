From: Marc Weber <marco-oweber@gmx.de>
Subject: [PATCH] experimental/write-file-hashed

This patch provides a function writing secret contentst to a special place.
So it works around the password problem. Its implementation looks like this:

  writeFileHashed = { prefix ? "", dir, contents}:
    let path = "${dir}/${prefix}${hash contents}";
    in write_contents_while_evaluating_and_return_path path contents

pros/cons:
+ easy to verify that its secury enough
- if you need a root file you have to evaluate as root
- store paths depend on files outside of the store which you cannot
  nix-copy-closure

Signed-off-by: Marc Weber <marco-oweber@gmx.de>
